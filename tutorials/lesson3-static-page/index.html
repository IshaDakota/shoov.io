<!DOCTYPE html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><link href=http://gmpg.org/xfn/11 rel=profile><meta http-equiv=content-type content="text/html; charset=utf-8"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Lesson 3 - First Baseline Image &middot; Shoov.io</title><link rel=stylesheet href=/assets/stylesheets/style.min.cfbd6d90.css><link rel=stylesheet href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400"><script src=/assets/javascript/all.min.74be1697.js></script><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/touch/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/assets/favicon.ico><link rel=alternate type=application/rss+xml title=RSS href=/atom.xml><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-6558346-10', 'auto');
  ga('send', 'pageview');</script></head><body><input type=checkbox class=sidebar-checkbox id=sidebar-checkbox><div class=sidebar id=sidebar><div class=sidebar-item><p></p></div><nav class=sidebar-nav><a class=sidebar-nav-item href="/">Home</a> <a class=sidebar-nav-item href="/glossary/">Glossary</a> <a class=sidebar-nav-item href="/tutorials/lesson1-install/">Lesson 1 - Installation & Setup</a> <a class=sidebar-nav-item href="/tutorials/lesson2-scaffold/">Lesson 2 - Setup a GitHub repository</a> <a class="sidebar-nav-item active" href="/tutorials/lesson3-static-page/">Lesson 3 - First Baseline Image</a> <a class=sidebar-nav-item href="/tutorials/lesson4-dynamic-intro/">Lesson 4 - Dynamic Elements Intro</a> <a class=sidebar-nav-item href="/tutorials/lesson5-dynamic-complex/">Lesson 5 - Complex Dynamic Elements</a></nav><div class=sidebar-item><p>&copy; 2015. All rights reserved.</p></div></div><div class=wrap><div class=masthead><div class=container><h3 class=masthead-title><a href="/" title=Home>Shoov.io</a> <small></small></h3></div></div><div class="container content"><div class=page><h1 class=page-title>Lesson 3 - First Baseline Image</h1><blockquote><p>Tip: The final result of this tutorial can be seen in this <a href=https://github.com/shoov/getting-started-example/blob/master/visual-monitor/test/tests.js>repository</a></p></blockquote><p>Lets do our first visual regression test on a dummy page which is completely static - that is, a page that never changes and has no dynamic content in it. The URL is <a href=http://pages.shoov.io>http://pages.shoov.io</a></p><p>This is the most simple case as we simply need to set the correct URL. We already have the <code>baseUrl</code> set to <code>http://pages.shoov.io</code> so we just need to adapt the following piece of code:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should show the static page&#39;</span><span class=p>,</span><span class=kd>function</span><span class=p>(</span><span class=nx>done</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>client</span>
    <span class=p>.</span><span class=nx>url</span><span class=p>(</span><span class=nx>baseUrl</span><span class=p>)</span>
    <span class=p>.</span><span class=nx>webdrivercss</span><span class=p>(</span><span class=nx>testName</span> <span class=o>+</span> <span class=s1>&#39;.static&#39;</span><span class=p>,</span> <span class=p>{</span>
</code></pre></div><p>We are ready to create our first baseline image. From <code>visual-monitor</code> folder execute the following command:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>PROVIDER_PREFIX</span><span class=o>=</span>browserstack <span class=nv>SELECTED_CAPS</span><span class=o>=</span>chrome mocha
</code></pre></div><p>Lets break the above command:</p><ol><li><code>PROVIDER_PREFIX=browserstack</code>: This tells our test to pick the configuration of BrowserStack, instead of for example using the default PhantomJs configuration.</li><li><code>SELECTED_CAPS=chrome</code>: The selected capabilities for this is <code>chrome</code>. This is an arbitrary name that is indicated in our test as Chrome version 42.0 on a OS X Yosemite. You may add as many capabilities as you wish.</li><li><code>mocha</code>: This executes all the tests under the <code>test</code> folder, and reports if tests failed or passed.</li></ol><p>Open BrowserStack&rsquo;s <a href=https://www.browserstack.com/automate>automate</a> page, and see how BrowserStack has provisioned a VM (virtual machine) with the exact same capabilities our test specified.</p><p><img src=/assets/images/tutorials/lesson3/automate.jpg alt="BrowserStack automate page"></p><p>Once finished you will find a new folder called <code>webdrivercss</code> - this is where all your baseline images will be saved.</p><p>You will see two files over there. We care only about the one that ends with <code>baseline.png</code> .In fact when we&rsquo;ll do <code>git add webdrivercss</code> it will add only the files that end with <code>baseline.png</code>, the rest are disregarded.</p><p>Lets confirm our baseline is correct by visually checking it and then by re-running the exact same test.</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>PROVIDER_PREFIX</span><span class=o>=</span>browserstack <span class=nv>SELECTED_CAPS</span><span class=o>=</span>chrome mocha
</code></pre></div><p>If everything went well, no regression should happen, and mocha will show us the test has finished without errors, and we can commit the files.</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash>git add .
git commit -am <span class=s2>&quot;Add baseline images for Chrome&quot;</span>
</code></pre></div><p>We can now continue creating baselines for different browsers. The test doesn&rsquo;t need to change - only the way we invoke it. For example, to create the baseline for Internet Explorer 11, we can execute it with the following command:</p><div class=highlight><pre><code class="bash language-bash" data-lang=bash><span class=nv>PROVIDER_PREFIX</span><span class=o>=</span>browserstack <span class=nv>SELECTED_CAPS</span><span class=o>=</span>ie11 mocha
</code></pre></div><p>But wait, don&rsquo;t commit the IE baseline image yet! Open the image that was done for IE. Have a close look. Is it ok?</p><p>Unfortunately, yet unsurprisingly, IE behaves differently than Chrome. The fixed navbar seems to repeat when the smaller images created by webdriverCSS are &ldquo;stitched&rdquo; together, resulting with a wrong image (we&rsquo;re trying to fix the issue <a href=(https://github.com/webdriverio/webdrivercss/issues/56>issue</a>) in webdriverCSS).</p><p><img src=/assets/images/tutorials/lesson3/ie-fixed-navbar.jpg alt="The fixed navbar is duplicated"></p><p>In the <a href="/tutorials/lesson4-dynamic-intro/">next chapter</a> we will see how to deal with this.</p></div></div></div><label for=sidebar-checkbox class=sidebar-toggle></label></body></html>